%!TEX root = ts.tex

\setcounter{chapter}{4}
\rSec0[lex]{Lexical conventions}

\setcounter{section}{0}
\Sec1[lex.separate]{Separate translation}

Modify paragraph 5.1/2 as follows
\begin{std.txt}
    \resetalinea[1]
    \alinea
    \enternote
    Previously translated translation units and instantiation units can be 
    preserved individually or in libraries. The separate translation units of 
    a program communicate (\ref{basic.link}) by (for example) calls to functions whose 
    identifiers have external \added{or module} linkage, manipulation of objects whose 
    identifiers have external \added{or module} linkage, or manipulation of data files. 
    Translation units can be separately translated and then later linked to produce 
    an executable program (\ref{basic.link}).  
    \exitnote

\end{std.txt}


\Sec1[lex.phases]{Phases of translation}

\noindent
Modify bullet 7 of paragraph 5.2/1 as follows:
\begin{std.txt}
%    \resetalinea[6]
%    \alinea
\begin{itemize}
    \item[7.]
    White-space characters separating tokens are no longer significant. 
    Each preprocessing token is converted into a token (5.6). 
    The resulting tokens are syntactically and semantically analyzed and 
    translated as a translation unit.
    \enternote
    The process of analyzing and translating the tokens may occasionally 
    result in one token being replaced by a sequence of other tokens (17.2). 
    \exitnote
    \added{It is implementation-defined whether the sources for
    module units and header units
    on which the current translation unit has an interface
    dependency (\ref{module.unit}, \ref{module.import})
    are required to be available.}
    \enternote
    Source files, translation units and translated translation units need not
     necessarily be stored as files, nor need there be any one-to-one 
     correspondence between these entities and any external representation. 
     The description is conceptual only, and does not specify any particular 
     implementation.
    \exitnote 
\end{itemize}
\end{std.txt}

\begin{after}
\setcounter{section}{3}
\Sec1[lex.pptoken]{Preprocessing tokens}

\textbf{\color{red}FIXME: The following change is a placeholder; the final rule for
context-sensitive lexing of \grammarterm{header-name} tokens
after \tcode{import} tokens is still under development.}

Modify bullet 3 of paragraph 5.4/3 as follows:

\begin{std.txt}
Otherwise, the next preprocessing token is
the longest sequence of characters
that could constitute a preprocessing token,
even if that would cause further lexical analysis to fail,
except that a \grammarterm{header-name} (5.8)
is only formed
\begin{itemize}
\item
within a \tcode{\#include} directive (19.2)\added{,}

\item
\added{within a \grammarterm{has-include-expression}, or}

\item
\added{outside of any preprocessing directive,
if applying phase 4 of translation to the sequence
of preprocessing tokens produced thus far
is valid and
results in an \grammarterm{import-seq} (\ref{cpp.module}).}
\end{itemize}
\end{std.txt}
\end{after}

\setcounter{section}{9}
\Sec1[lex.name]{Identifiers}

In \ref{lex.name}, add these two identifiers to Table 4,
``Identifiers with special meaning'':

\begin{std.txt}
\added{\tcode{module}}\\
\added{\tcode{import}}
\end{std.txt}

\setcounter{section}{10}
\Sec1[lex.key]{Keywords}

\noindent
Modify note in paragraph \ref{lex.key}/1 as follows:
\begin{std.txt}
    \resetalinea[0]
    \alinea
    ...


    \enternote
    The \removed{\tcode{export} and} \tcode{register} keyword\removed{s are} \added{is}
    unused but \removed{are} \added{is} 
    reserved for future use.
    \exitnote
\end{std.txt}
